<ion-view class="sale-customer-view" cache-view="false">

  <ion-nav-title>{{'sale-customer.title' | translate}}</ion-nav-title>

  <ion-content ng-hide="saleCustomerCtrl.loading">

    <div class="card">
      <div class="item item-divider item-icon-right">
        {{'sale-customer.title' | translate}}
        <i class="icon ion-android-more-vertical" onclick="event.stopPropagation();"
           ng-click="saleCustomerCtrl.openPopover($event)" ng-if="saleCustomerCtrl.customer"></i>
      </div>
      <div class="item item-text-wrap" ng-if="saleCustomerCtrl.customer">
        <div class="row">
          <div class="col col-33"><b>{{'sale-customer.name' | translate}}</b></div>
          <div class="col">{{saleCustomerCtrl.customer.name}}</div>
        </div>
        <div class="row">
          <div class="col col-33"><b>{{'sale-customer.id' | translate}}</b></div>
          <div class="col">{{saleCustomerCtrl.customer.idType.label}}: {{saleCustomerCtrl.customer.idValue}}</div>
        </div>
        <div class="row">
          <div class="col col-33"><b>{{'sale-customer.address' | translate}}</b></div>
          <div class="col">{{saleCustomerCtrl.customer.mainAddress.description}}</div>
        </div>

      </div>

      <div class="item item-text-wrap" ng-if="!saleCustomerCtrl.customer">
        <div class="row">
          <div class="col text-center">
            <b>{{'sale-customer.noCustomer' | translate}}</b>
          </div>
        </div>
        <div class="row">
          <button class="button button-positive button-block" ng-click="saleCustomerCtrl.navigateToSearch()">
            <i class="ion-android-search"></i> {{"sale-customer.search" | translate}}
          </button>
        </div>
      </div>


    </div>


    <div class="list padding">

      <label class="item item-input item-select">
        <div class="input-label">
          <b>{{'sale-customer.taxType' | translate}}</b></div>
        <select ng-model="saleCustomerCtrl.vatType" ng-change="saleCustomerCtrl.updateVatTypeAndLoyaltyProgram()">
          <option disabled selected value=""> {{"sale-customer.none" | translate}} </option>
          <option ng-repeat="tax in saleCustomerCtrl.taxTypes" value="{{tax.key}}">{{tax.value}}</option>
        </select>
      </label>

      <label class="item item-input item-select" ng-if="saleCustomerCtrl.customer.loyaltyPrograms.length > 0 && saleCustomerCtrl.customer" >
        <div class="input-label">
          <b>{{'sale-customer.loyaltyPrograms' | translate}}</b></div>
        <select ng-model="saleCustomerCtrl.loyaltyProgramKey"  ng-change="saleCustomerCtrl.updateVatTypeAndLoyaltyProgram()">
          <option disabled selected value=""> {{"sale-customer.none" | translate}} </option>
          <option ng-repeat="program in saleCustomerCtrl.customer.loyaltyPrograms" value="{{program.id}}">{{program.name}}</option>
        </select>
      </label>

    </div>

  </ion-content>


</ion-view>
