<ion-view>

  <ion-nav-title>{{'stock.title' | translate}}</ion-nav-title>
  <ion-nav-buttons side="right">
    <cart-summary></cart-summary>
  </ion-nav-buttons>

  <!-- We need to wrap the entire header around a form so we can get the Go/Search key event by the submit directive -->
  <ion-header-bar class="bar bar-subheader item-input-inset">
    <input class="full-width" placeholder="{{'stock.search' | translate}}" ng-model="stockCtrl.queryString" type="search" ng-model-options="{debounce: 500}">
    <button class="button button-icon icon button-clear button-dark" ng-click="stockCtrl.toggleAvailableOnly()"
            ng-class="stockCtrl.availableOnly ? 'ion-android-checkbox-outline' : 'ion-android-checkbox-outline-blank'"></button>
  </ion-header-bar>

  <ion-content>

    <div class="list">

      <div class="item item-divider" ng-show="stockCtrl.stocks.store.length > 0">
        <span><b>{{'stock.store' | translate}}</b></span>
      </div>

      <div class="item padding" ng-repeat="stock in stockCtrl.stocks.store | filter:stockCtrl.search">
          {{stock.warehouse.description}}
          <p>{{stock.state.description}}</p>
          <span class="badge">{{stock.amount}}</span>
      </div>

      <div class="item item-divider" ng-show="stockCtrl.stocks.other.length > 0">
        <span><b>{{'stock.other' | translate}}</b></span>
      </div>

      <div class="item padding" ng-repeat="stock in stockCtrl.stocks.other | filter:stockCtrl.search">
          {{stock.warehouse.description}}
          <p>{{stock.state.description}}</p>
          <span class="badge">{{stock.amount}}</span>
      </div>

    </div>

  </ion-content>

</ion-view>
